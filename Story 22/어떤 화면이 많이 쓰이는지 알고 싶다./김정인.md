# 내용정리 

---

- 모니터링 툴이 없는 상황에서 어떤 화면이 많이 호출되었는지 확인하는 방법은 쉽지 않다.
- 그러나 웹서버만 있으면, 웹로그 (access log) 를 사용하여 시스템을 분석하는 방법이 있다.

<br />

### 웹로그란? 

- 아파치나 Nginx, iPlanet 과 같은 모든 웹 서버에 공통적으로 제공되는 기능
- 서버에 어떤 사용자가 어떤 요청을 하였고, 결과는 어떠한지 파일에 한 줄씩 쌓아준다.
- 웹 서버에서는 모든 요청에 대한 로그를 쌓는다.


<br />

### httpd.conf

    LogFormat "%h %l %u %t \"%r\" %>s %b" common


- % 뒤에 표시하고자 하는 데이터의 지시어를 지정하도록 되어 있다.


    127.0.0.1 - - [22/Oct/20XX:14:04:43 +0900] "GET /a.gif HTTP/1.1" 200 2326

- 127.0.0.1 (%h) : 서버에 요청을 한 클라이언트(원격 호스트)의 IP 주소이다.
  - 만약 HostnameLookups 라는 설정값이 On 이라면 IP 주소 대신 호스트 명이 명시된다.
  - 그러나 이 설정은 서버를 매우 느리게 할 수 있는 단점이 있다.
  - 클라이언트가 프록시(proxy) 서버를 사용할 경우 클라이언트의 실제 주소가 아닌 프록시 서버의 주소가 이 부분에 표시된다.
- -(%l): '-'로 표시되어 있기 때문에 요청한 정보가 없을을 의미한다.
  - identd라는 사용자 인식 데몬이 클라이언트에서 동작하고 있을 경우에만 이 정보가 나타난다.
- -(%u): HTTP 인증을 통하여 확인된 문서를 요청한 사용자의 ID RK vytlehlsek.
  - 암호화 되지 않은 페이지이기 때뭉네 이 항목도 앞의 항목과 같이 ? 로 표기된다.
- [22/Oct/2007:14:04:43 +0900] (%t) : 서버가 요청을 마친 시간이다.
  - 웹 서버에서 해당 요청이 처리되어 종료된 시간
- "GET /a.gif HTTP/1.1"("\ %r\") : 클라이언트에서 요청한 Request 의 정보를 나타낸다.
  - 요청 방식(method) 가 처음 나타나며, 요청 주소(URI) 가 표시된다. 가장 마지막에는 클라이언트에서 사용한 프로토콜의 종류와 버전이 표시된다.
- 200 (%>s) : 서버에서 클라이언트로 보낸 최종 상태 코드를 의미한다. 만약 클라이언트에 해당 파일이 존재하면 304가 표시된다.
- 2326 (%b) : 클라이언트로 전송한 데이터의 크기가 표시된다. 여기서 헤더 정보의 크기는 포함되지 않는다.

- %D : 요청의 처리 시간을 마이크로초 단위로 나타낸다.
- %T : 요청의 처리 시간을 초 단위로 나타낸다.


<br />

### 무료 웹 로그 분석 툴

- Analog
- AWStats
- Webalizer

### AWStats 제공 기능

- 방문 횟수와 방문자 수
- 방문하여 페이지에 머무른 기간 및 마지막 방문일
- 각 시간 및 요일별 방문 페이지 수와 네트워크 사용량
- 방문자의 국가 (GeoIP 활용)
- 가장 많이 본 페이지, 유입 경로 및 마지막 페이지
- 웹 압축 통계
- 사용 OS 및 브라우저 통계
- 방문 검색 로봇의 횟수
- 검색 엔진 및 검색 키워드
- HTTP 에러 목록
- 즐겨찾기 북마크에 추가된 횟수
- 화면 크기



